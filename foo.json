[{"reports":[{"returns":[[{"user":null,"err":[null,null],"out":[null,null],"throw":true,"nodes":[{"name":"spock","connector":"flax-lxc-connector.core","options":{"clone":"ubuntu-base","retry":100,"delay":100},"force":false}]}],[{"exit":0,"user":null,"err":{"keys":[null,null],"value":""},"out":{"keys":[null,null],"value":""},"throw":true,"nodes":[{"name":"spock"}],"invocation":"mkdir -p ~/.ssh"}],[{"exit":0,"user":null,"err":{"keys":[null,null],"value":""},"out":{"keys":[null,null],"value":"Reading package lists...\nBuilding dependency tree...\nReading state information...\ndnsutils is already the newest version.\n0 upgraded, 0 newly installed, 0 to remove and 23 not upgraded."},"throw":true,"nodes":[{"name":"spock"}],"invocation":"apt-get -y install dnsutils"}],[{"exit":0,"user":null,"err":{"keys":[null,null],"value":""},"out":{"keys":[null,"IP_ADDRESS"],"value":"10.0.3.176 "},"throw":true,"nodes":[{"name":"spock","out":"IP_ADDRESS"}],"invocation":"hostname -I"}],[{"exit":null,"user":null,"err":{"keys":[null,null],"value":""},"out":{"keys":[null,null],"value":"Generating public/private rsa key pair.\n/root/.ssh/flax_id_rsa already exists.\nOverwrite (y/n)? "},"nodes":[{"name":"spock"}],"throw":false,"invocation":"echo -e \"\\n\\n\\n\" | ssh-keygen -t rsa -N \"\" -f ~/.ssh/flax_id_rsa"}],[{"exit":0,"user":null,"err":{"keys":[null,null],"value":""},"out":{"keys":[null,"SSH_PRIVATE_KEY"],"value":"-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEAtRfzXmkjb2Ac7txlBCoWJPx3XYUQ0Z+QZCyQSvySYeGTbuJ2\nyhHl1R83lfTufAehgshu4+DQVphSrutY2UNDF9jsN7Epc695XI/cRWEOVb4qNlfW\nxV7HOmG+BI6ZuRVNjK0JzLe2t6Aa0YaooPNqTFL5qJuFw9iiQCdaQ0+gOpGrSUx3\n/A9ahQ5kYGZvhf8GS85ms3kkHmuXe/INGfRofIiZRnBnDsXKcQDhhw0q4UkOtNBZ\n8RO2Cceo7xBofrtRYlF6bLJRvFV79jV4Yo3f67+VsjcEBnKKEZA0QIPkKT+UpjjP\nyaiSKGBClwYj/Ac/UqR5En9IuerbRpDd/eCinwIDAQABAoIBAQCBNV2Hdyy5QrJi\nGw5YMk8qhJgGOfMOHfNABivN1Pf8rp4q95oaAzshHOzkKaYfCLLMRYYZQUZlArm7\n5F+4ZK1yTmv8MIOK7yCAUoSvW9iGhPBJZdLvb/hmR2b0iWpVDEYQoUXksw/DZJC9\n/n5CmGq3mlxXWN/QJLlfXLSiYiXIowN4/QBRWtGZqTQyBfhhMnGrQ/PffNt8mNzf\ngoVmUF1s4Zp9sMOTWpMd8uDWIk3zugRzS2FO0o5DEssuvjAoUXAc8hYlghbGzrXl\n2FPCVVtWJbndFqeBRvF+OHpExsFjam340DmZnvL3jJvMq3oWsTFkueREdvUUutgE\nKqMpeMTBAoGBANjCgwlN0XeRA6yhmdSBgjPU7PV+9JZ/xwmKBbkcLrnCwirFQpII\nheYuzgJbAFuaQ/WjJscFSuN9cW4rLi37FLgZou+YdP06d3HpImRLgkmVV/v3PZkf\nyklq2uZzKL3pbdwmVS+TFyJYgg+7ztXRqooJTWD2qP+7LIw6HzYyFu9bAoGBANXg\nhs7qAk4PGAAVBp/4pYnnR5WJ64zSyFRZM9LTebdTP8GBgvf/HuBQW0KhzlTI7OBo\nsLAUGfPZBYToL1G8RePhhnM5Xj4qVCMUIr/aB0OVbKMhrZPwsgxT9nkLw0SAfPa4\nDFhJWsBoo1wFAN7+dV2znslH98hAkodKcpQyH2ENAoGAeFkO7gSBz3P5aUjUIxPA\n2cxXwDo7zK+nL9mtMci+/K5wpdSeEHyg81t7T/18pl9xahmqtwduO/5zEyrwWeE0\n8L5zI7ovAkYK+XjqemseLIK5thDg53qqErc8UIUR0tefAoNZ+q8dQhmIJPoubbMa\nj8d4aeSpkks3AahnmeyXpU8CgYEAihb/s1TvzAp+yn7I2jymVRWY6Ho2NaRaZ+t4\nRGT6L112yq+eKhT0kIwRgEIMgD2Cg5nUirtPzluO7rMi6jkPPwT71CV0LdsSm9uC\nXDCfhAlULTevZNeBfegwORNZLj9vb7SBc/dYuuZUozMvzsqoaKlymi73UrouYV+1\n/u0lyXkCgYAUPlBCujG2gCrjUEswG415ZulBbFle6UhDOc9ZkTgjAwBSvanIUt29\nYoE6XguE7C43ErIGWebiOfCsnoFTnhzMX1Nbpxu8l5xNQ/8UvBU7M6DUnfHTqnVT\nFgzDR4eQLNUGVtBAHU/LFMb3t/roKqJSevnKSZBuyrnKPfEIX/cWCw==\n-----END RSA PRIVATE KEY-----"},"throw":true,"nodes":[{"name":"spock","out":"SSH_PRIVATE_KEY"}],"invocation":"cat ~/.ssh/flax_id_rsa","log":false}]],"env":{"SSH_PRIVATE_KEY":"-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEAtRfzXmkjb2Ac7txlBCoWJPx3XYUQ0Z+QZCyQSvySYeGTbuJ2\nyhHl1R83lfTufAehgshu4+DQVphSrutY2UNDF9jsN7Epc695XI/cRWEOVb4qNlfW\nxV7HOmG+BI6ZuRVNjK0JzLe2t6Aa0YaooPNqTFL5qJuFw9iiQCdaQ0+gOpGrSUx3\n/A9ahQ5kYGZvhf8GS85ms3kkHmuXe/INGfRofIiZRnBnDsXKcQDhhw0q4UkOtNBZ\n8RO2Cceo7xBofrtRYlF6bLJRvFV79jV4Yo3f67+VsjcEBnKKEZA0QIPkKT+UpjjP\nyaiSKGBClwYj/Ac/UqR5En9IuerbRpDd/eCinwIDAQABAoIBAQCBNV2Hdyy5QrJi\nGw5YMk8qhJgGOfMOHfNABivN1Pf8rp4q95oaAzshHOzkKaYfCLLMRYYZQUZlArm7\n5F+4ZK1yTmv8MIOK7yCAUoSvW9iGhPBJZdLvb/hmR2b0iWpVDEYQoUXksw/DZJC9\n/n5CmGq3mlxXWN/QJLlfXLSiYiXIowN4/QBRWtGZqTQyBfhhMnGrQ/PffNt8mNzf\ngoVmUF1s4Zp9sMOTWpMd8uDWIk3zugRzS2FO0o5DEssuvjAoUXAc8hYlghbGzrXl\n2FPCVVtWJbndFqeBRvF+OHpExsFjam340DmZnvL3jJvMq3oWsTFkueREdvUUutgE\nKqMpeMTBAoGBANjCgwlN0XeRA6yhmdSBgjPU7PV+9JZ/xwmKBbkcLrnCwirFQpII\nheYuzgJbAFuaQ/WjJscFSuN9cW4rLi37FLgZou+YdP06d3HpImRLgkmVV/v3PZkf\nyklq2uZzKL3pbdwmVS+TFyJYgg+7ztXRqooJTWD2qP+7LIw6HzYyFu9bAoGBANXg\nhs7qAk4PGAAVBp/4pYnnR5WJ64zSyFRZM9LTebdTP8GBgvf/HuBQW0KhzlTI7OBo\nsLAUGfPZBYToL1G8RePhhnM5Xj4qVCMUIr/aB0OVbKMhrZPwsgxT9nkLw0SAfPa4\nDFhJWsBoo1wFAN7+dV2znslH98hAkodKcpQyH2ENAoGAeFkO7gSBz3P5aUjUIxPA\n2cxXwDo7zK+nL9mtMci+/K5wpdSeEHyg81t7T/18pl9xahmqtwduO/5zEyrwWeE0\n8L5zI7ovAkYK+XjqemseLIK5thDg53qqErc8UIUR0tefAoNZ+q8dQhmIJPoubbMa\nj8d4aeSpkks3AahnmeyXpU8CgYEAihb/s1TvzAp+yn7I2jymVRWY6Ho2NaRaZ+t4\nRGT6L112yq+eKhT0kIwRgEIMgD2Cg5nUirtPzluO7rMi6jkPPwT71CV0LdsSm9uC\nXDCfhAlULTevZNeBfegwORNZLj9vb7SBc/dYuuZUozMvzsqoaKlymi73UrouYV+1\n/u0lyXkCgYAUPlBCujG2gCrjUEswG415ZulBbFle6UhDOc9ZkTgjAwBSvanIUt29\nYoE6XguE7C43ErIGWebiOfCsnoFTnhzMX1Nbpxu8l5xNQ/8UvBU7M6DUnfHTqnVT\nFgzDR4eQLNUGVtBAHU/LFMb3t/roKqJSevnKSZBuyrnKPfEIX/cWCw==\n-----END RSA PRIVATE KEY-----","IP_ADDRESS":"10.0.3.176 "}},{"reports":[{"returns":[[{"exit":0,"user":"ubuntu","err":{"keys":[null,null],"value":""},"out":{"keys":[null,null],"value":""},"throw":true,"nodes":[{"name":"spock","user":"ubuntu"}],"log":false,"invocation":"cd && mkdir -p ~/.ssh\nchmod 600 ~/.ssh/id_rsa\necho \"-----BEGIN RSA PRIVATE KEY-----\n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\n-----END RSA PRIVATE KEY-----\" > ~/.ssh/id_rsa\n"}],[{"exit":0,"user":"ubuntu","err":{"keys":[null,null],"value":"Identity added: /home/ubuntu/.ssh/id_rsa (/home/ubuntu/.ssh/id_rsa)\nHi tjb1982! You've successfully authenticated, but GitHub does not provide shell access.\nAlready on 'yar-2-compat'\nFrom github.com:riptano/ripcord\n * branch            yar-2-compat -> FETCH_HEAD"},"out":{"keys":[null,null],"value":"Agent pid 5500\nRemoving spock/target/\nM\tspock/resources/log4j.properties\nM\tspock/test/functional/spock.properties\nYour branch is up-to-date with 'origin/yar-2-compat'.\nAlready up-to-date."},"throw":true,"nodes":[{"name":"spock","user":"ubuntu"}],"description":"Clone the ripcord repository (containing the spock source) for the branch \"yar-2-compat\" onto the node \"spock\".\n","invocation":"cd ~\neval \"$(ssh-agent -s)\"\nssh-add ~/.ssh/id_rsa\nssh -T git@github.com -o StrictHostKeyChecking=no\n\nif [ ! -d ripcord ]; then\n        git clone git@github.com:riptano/ripcord.git\nfi\ncd ripcord\ngit clean -xfd\ngit fetch origin\ngit checkout yar-2-compat\ngit pull origin yar-2-compat\n# for access to ctool/automaton\n#git submodule update --init\n"}],[{"exit":0,"user":"root","err":{"keys":[null,null],"value":""},"out":{"keys":[null,null],"value":"/usr/bin/lein"},"throw":true,"nodes":[{"user":"root","name":"spock"}],"invocation":"which lein || curl https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein -o /usr/bin/lein\nchmod 755 /usr/bin/lein\n"}],[{"exit":0,"user":"ubuntu","err":{"keys":[null,null],"value":"Compiling spock.cli-plugins.datacenter\nWARNING: update already refers to: #'clojure.core/update in namespace: korma.core, being replaced by: #'korma.core/update\nWARNING: update already refers to: #'clojure.core/update in namespace: cumin.pagination, being replaced by: #'korma.core/update\nCompiling spock.cli-plugins.definitions\nCompiling spock.cli-plugins.cluster\nCompiling spock.cli-plugins.cloud-credential\nCompiling spock.cli-plugins.config-profile\nCompiling spock.cli-plugins.http\nCompiling spock.cli-plugins.db\nCompiling spock.cli-plugins.node\nCompiling spock.cli-plugins.cli-plugin\nCompiling spock.cli-plugins.machine-credential\nCompiling spock.system\nCompiling spock.jobs.scheduler\nCompiling spock.jobs.system\nCompiling spock.jobs.node-manager\nCompiling spock.jobs.channels\nCompiling spock.jobs.multinode.decommission\nCompiling spock.jobs.multinode.configure\nCompiling spock.jobs.multinode.common\nCompiling spock.jobs.multinode.sample\nCompiling spock.jobs.multinode.restart\nCompiling spock.jobs.multinode.install\nCompiling spock.jobs.multinode.cluster-import\nCompiling spock.jobs.multinode.upgrade\nCompiling spock.jobs.install\nCompiling spock.jobs.executor\nCompiling spock.jobs.manager\nCompiling spock.database.migration\nCompiling spock.database.db\nCompiling spock.database.models\nCompiling spock.web\nCompiling spock.utils.crypto\nCompiling spock.utils.validation\nCompiling spock.utils.version\nCompiling spock.utils.async\nCompiling spock.utils.json\nCompiling spock.utils.data\nCompiling spock.utils.network\nCompiling spock.utils.retry\nCompiling spock.utils.classpath\nCompiling spock.utils.jython\nCompiling spock.system-config\nCompiling spock.api.job\nCompiling spock.api.datacenter\nCompiling spock.api.job-event\nCompiling spock.api.action\nCompiling spock.api.cluster\nCompiling spock.api.repository-credential\nCompiling spock.api.constants\nCompiling spock.api.cloud-credential\nCompiling spock.api.common\nCompiling spock.api.config-profile\nCompiling spock.api.auth\nCompiling spock.api.node\nCompiling spock.api.cluster-context\nCompiling spock.api.field-merge\nCompiling spock.api.routes\nCompiling spock.api.rest\nCompiling spock.api.machine-credential\nCompiling spock.api.job-node\nCompiling spock.core\nCompiling spock.cloud.aws.keypair\nCompiling spock.cloud.aws.tag\nCompiling spock.cloud.aws.security-group\nCompiling spock.cloud.aws.util\nCompiling spock.cloud.aws.node\nCompiling spock.cloud.common\nCompiling spock.cloud.aws\nCompiling spock.security.ca\nCompiling spock.security.ssl\nCompiling spock.config.renderer.renderer-helpers\nCompiling spock.config.renderer.logback-xml-renderer\nCompiling spock.config.renderer.cassandra-rackdc-properties-renderer\nCompiling spock.config.renderer.cassandra-env-sh-renderer\nCompiling spock.config.renderer.etc-default-dse-renderer\nCompiling spock.config.definitions\nCompiling spock.config.generator\nCompiling spock.config.seed-picker\nCompiling spock.config.cassandra-yaml\nCompiling spock.config.token-generator\nCompiling spock.config.diffs"},"out":{"keys":[null,null],"value":"Created /home/ubuntu/ripcord/spock/target/spock-0.1.0-SNAPSHOT.jar\nCreated /home/ubuntu/ripcord/spock/target/spock-0.1.0-SNAPSHOT-standalone.jar"},"throw":true,"nodes":[{"name":"spock","user":"ubuntu"}],"description":"Copies the log4j settings to the resources directory so that it's on the classpath,  creates a temporary directory to store spock-related artifacts, and  builds the spock service as a jar including all of its dependencies.\n","invocation":"cd ~/ripcord/spock\ncp ./test/functional/log4j.ftest.properties ./resources/log4j.properties\nmkdir -p /var/tmp/spock\nchmod 755 /var/tmp/spock\nlein clean\nlein uberjar\n"}],[{"exit":143,"user":"root","err":{"keys":[null,null],"value":"\nSession terminated, terminating shell... ...terminated."},"out":{"keys":[null,null],"value":""},"throw":true,"nodes":[{"user":"root","name":"spock"}],"invocation":"pkill -f spock"}],[{"exit":0,"user":"ubuntu","err":{"keys":[null,null],"value":""},"out":{"keys":[null,null],"value":""},"throw":true,"nodes":[{"name":"spock","user":"ubuntu"}],"description":"Kills running spock instances, drops/recreates the database, and restarts the spock daemon\n","invocation":"start-stop-daemon --stop --pidfile /var/tmp/spock/spock.pid\nrm -f /var/tmp/spock/spock.db\ncd ~/ripcord/spock\ncp ./test/functional/log4j.ftest.properties ./resources/log4j.properties\nsed -i 's/.*node.callback-address=.*/node.callback-address=http:\\/\\/10.0.3.176:8889/' ./test/functional/spock.properties\nstart-stop-daemon --start --name spock -m --pidfile /var/tmp/spock/spock.pid --background --exec /bin/bash -- \\\n    -c 'cd ~/ripcord/spock\n        java -Dspock.configuration=./test/functional/spock.properties \\\n            -jar ./target/spock-0.1.0-SNAPSHOT-standalone.jar http serve'\n"}]],"env":{}},{"reports":[{"returns":[[{"exit":0,"user":"ubuntu","err":{"keys":[null,null],"value":"Attempt #1...Fail: attempting to connect to 10.0.3.176:8889/api/\nAttempt #2...Fail: attempting to connect to 10.0.3.176:8889/api/\nAttempt #3...Fail: attempting to connect to 10.0.3.176:8889/api/\nAttempt #4...Fail: attempting to connect to 10.0.3.176:8889/api/\nAttempt #5...Fail: attempting to connect to 10.0.3.176:8889/api/\nAttempt #6..."},"out":{"keys":[null,null],"value":"OK"},"throw":true,"nodes":[{"name":"spock","user":"ubuntu"}],"description":"A smoke test that pings Spock at the api base. Checks n times every m seconds before reporting a failure, so that the spock service has a chance to start up completely.\n","invocation":"~/ripcord/spock/test/functional/smoketests/smoke-test.sh 10.0.3.176:8889/api/ 20 2"}],[{"exit":0,"user":"ubuntu","err":{"keys":[null,null],"value":""},"out":{"keys":[null,null],"value":"OK"},"throw":true,"nodes":[{"name":"spock","user":"ubuntu"}],"description":"A smoke test that tries the /provisioning/datacenters/ endpoint, waiting 5 seconds for a response\n","invocation":"~/ripcord/spock/test/functional/smoketests/smoke-test.py 10.0.3.176\n"}]],"env":{}},{"reports":[{"returns":[[{"exit":null,"user":"root","err":{"keys":[null,null],"value":""},"out":{"keys":[null,null],"value":"Requirement already satisfied (use --upgrade to upgrade): pyyaml in /usr/local/lib/python2.7/dist-packages\nCleaning up..."},"throw":false,"nodes":[{"name":"spock","user":"root"}],"invocation":"pip install pyyaml"}],[{"exit":1,"user":"ubuntu","err":{"keys":[null,null],"value":"Identity added: /home/ubuntu/.ssh/id_rsa (/home/ubuntu/.ssh/id_rsa)\nHi tjb1982! You've successfully authenticated, but GitHub does not provide shell access.\nTesting http://10.0.3.176:8889/api/v1/provisioning/repository_credentials/:\nTest #1.1. Simply creating a repository credential\nWarning:\n\tStatus:\n\t\tThe value for key 'status' at depth 0 was expected to be 201 (<type 'int'>), but was 200 (<type 'int'>) instead\n  \nOK\n\nTest #1.2. Post a duplicate repository credential\nFailed: It should return status 409\n\tStatus errors:\n\t\tThe value for key 'status' at depth 0 was expected to be 409 (<type 'int'>), but was 200 (<type 'int'>) instead\n  \n\n\tdata:\n\t\t{'username': u'lalala', 'password': 'abc123', 'name': u'foo'}\n \n\tbody:\n\t\t{\"modified-on\":\"2015-10-26 11:53:51\",\"name\":\"foo\",\"created-on\":\"2015-10-26 11:53:51\",\"username\":\"lalala\",\"type\":\"repository-credential\",\"created-by\":\"system\",\"id\":2,\"comment\":null,\"related-resources\":{\"clusters\":\"http://10.0.3.176:8889/api/v1/provisioning/repository_credentials/2/clusters/\"},\"href\":\"http://10.0.3.176:8889/api/v1/provisioning/repository_credentials/2\",\"modified-by\":\"system\"}\n \n\theaders:\n\t\tCaseInsensitiveDict({'date': 'Mon, 26 Oct 2015 11:53:51 GMT', 'content-length': '393', 'content-type': 'application/json; charset=utf-8', 'server': 'Jetty(7.x.y-SNAPSHOT)'})\n \nTest #1.3. Submitting a non-existent `name` but existing `username`\nWarning:\n\tStatus:\n\t\tThe value for key 'status' at depth 0 was expected to be 201 (<type 'int'>), but was 200 (<type 'int'>) instead\n  \nOK\n\nTest #1.4. Submitting an existing `name` but non-existent `username`\nFailed: It should return status 409\n\tStatus errors:\n\t\tThe value for key 'status' at depth 0 was expected to be 409 (<type 'int'>), but was 200 (<type 'int'>) instead\n  \n\n\tdata:\n\t\t{'username': 'different', 'password': 'abc123', 'name': u'foo'}\n \n\tbody:\n\t\t{\"modified-on\":\"2015-10-26 11:53:51\",\"name\":\"foo\",\"created-on\":\"2015-10-26 11:53:51\",\"username\":\"different\",\"type\":\"repository-credential\",\"created-by\":\"system\",\"id\":4,\"comment\":null,\"related-resources\":{\"clusters\":\"http://10.0.3.176:8889/api/v1/provisioning/repository_credentials/4/clusters/\"},\"href\":\"http://10.0.3.176:8889/api/v1/provisioning/repository_credentials/4\",\"modified-by\":\"system\"}\n \n\theaders:\n\t\tCaseInsensitiveDict({'date': 'Mon, 26 Oct 2015 11:53:51 GMT', 'content-length': '396', 'content-type': 'application/json; charset=utf-8', 'server': 'Jetty(7.x.y-SNAPSHOT)'})\n \nTest #1.5. Submitting without password\nOK\n\nTest #1.6. GET the current collection\nOK\n\nTesting http://10.0.3.176:8889/api/v1/provisioning/repository_credentials/1:\nTest #2.1. GET the resource\nOK\n\nTest #2.2. PUT a different name into the credential\nOK\n\nTest #2.3. DELETE the credential\nOK\n\nTest #2.4. GET the deleted credential\nOK\n\nTesting http://10.0.3.176:8889/api/v1/provisioning/repository_credentials/:\nTest #3.1. GET all repository credentials\nOK\n\nTest #3.2. Create a new credential\nWarning:\n\tStatus:\n\t\tThe value for key 'status' at depth 0 was expected to be 201 (<type 'int'>), but was 200 (<type 'int'>) instead\n  \nOK\n\n10 passing.\n2 failing.\n\nEnvironment: {'_username': u'lalala', '_location': None, '_count': 4, 'argv': [], '_name': u'foo', '_foo': {u'username': u'lalala', u'comment': None, u'name': u'foo', u'created-by': u'system', u'id': 1, u'href': u'http://10.0.3.176:8889/api/v1/provisioning/repository_credentials/1', u'modified-by': u'system', u'related-resources': {u'clusters': u'http://10.0.3.176:8889/api/v1/provisioning/repository_credentials/1/clusters/'}, u'type': u'repository-credential', u'created-on': u'2015-10-26 11:53:51', u'modified-on': u'2015-10-26 11:53:51'}, '_id': 5}"},"out":{"keys":[null,null],"value":"Agent pid 5686"},"throw":true,"nodes":[{"name":"spock","user":"ubuntu"}],"description":"A more or less thorough functional test of the /provisioning/repository_credentials/ endpoint.\n","invocation":"cd ~\neval \"$(ssh-agent -s)\"\nssh-add ~/.ssh/id_rsa\nssh -T git@github.com -o StrictHostKeyChecking=no\n\nif [ ! -d gingham ]; then\n    git clone git@github.com:tjb1982/gingham.git\nfi\n\ngingham/gingham.py ~/ripcord/spock/test/functional/api-tests/repository-credentials-test.yaml -b http://10.0.3.176:8889/api/v1\n"}]],"env":{}}],"module":"~{TEST_DIR}/modules/gingham.yaml","isolate":true,"in":{"TEST":"~@test","BASE":"http://~{SPOCK_HOSTNAME}:8889/api/v1","NODE_NAME":"~@SPOCK_NODE_NAME","NODE_USER":"~@SPOCK_USER"}}],"module":"~{TEST_DIR}/modules/spock-smoketest.yaml","then":[[{"~(for":[["test",["~{OPSC_HOME}/spock/test/functional/api-tests/repository-credentials-test.yaml"]],{"module":"~{TEST_DIR}/modules/gingham.yaml","isolate":true,"in":{"TEST":"~@test","BASE":"http://~{SPOCK_HOSTNAME}:8889/api/v1","NODE_NAME":"~@SPOCK_NODE_NAME","NODE_USER":"~@SPOCK_USER"}}]}]]}],"module":"~{TEST_DIR}/modules/spock-init.yaml","in":null,"then":[[{"module":"~{TEST_DIR}/modules/spock-smoketest.yaml","then":[[{"~(for":[["test",["~{OPSC_HOME}/spock/test/functional/api-tests/repository-credentials-test.yaml"]],{"module":"~{TEST_DIR}/modules/gingham.yaml","isolate":true,"in":{"TEST":"~@test","BASE":"http://~{SPOCK_HOSTNAME}:8889/api/v1","NODE_NAME":"~@SPOCK_NODE_NAME","NODE_USER":"~@SPOCK_USER"}}]}]]}]]}],"module":"~{TEST_DIR}/modules/node-init.yaml","in":{"NODE_NAME":"~@SPOCK_NODE_NAME","IP_INVOCATION":{"~(if":["~@PRIVATE_IP","hostname -I","dig +short myip.opendns.com @resolver1.opendns.com"]}},"out":{"SPOCK_HOSTNAME":"~@IP_ADDRESS"},"then":[[{"module":"~{TEST_DIR}/modules/spock-init.yaml","in":null,"then":[[{"module":"~{TEST_DIR}/modules/spock-smoketest.yaml","then":[[{"~(for":[["test",["~{OPSC_HOME}/spock/test/functional/api-tests/repository-credentials-test.yaml"]],{"module":"~{TEST_DIR}/modules/gingham.yaml","isolate":true,"in":{"TEST":"~@test","BASE":"http://~{SPOCK_HOSTNAME}:8889/api/v1","NODE_NAME":"~@SPOCK_NODE_NAME","NODE_USER":"~@SPOCK_USER"}}]}]]}]]}]]}]