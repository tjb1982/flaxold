name: Empty
description: launch a cluster with some number of empty nodes
requires:
        - key: NUM_NODES
          description: number of nodes to create
        - key: CLUSTER_NAME
          description: the name of this cluster as registered in the global cluster registry
provides:
        - key: SSH_PRIVATE_KEY
          description: string containing the complete id_rsa private key shared by all created nodes
        - key: IPS
          description: a comma-separated list of the IPs of the nodes generated by this module
checkpoints:
        throw: true
        groups:
                - group:
                        - cluster:
                                name: $CLUSTER_NAME
                                num-nodes: $NUM_NODES
                                force: true
                - group:
                        - cluster:
                                name: $CLUSTER_NAME
                          exec: dig +short myip.opendns.com @resolver1.opendns.com
                          delimiter: ","
                          out: EMPTY_IPS
                        - cluster:
                                name: $CLUSTER_NAME
                          node-list: 0
                          exec: cat ~/.ssh/id_rsa
                          out: EMPTY_SSH_PRIVATE_KEY

